-- Services
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Créer l'interface
local screenGui = Instance.new("ScreenGui", player:WaitForChild("PlayerGui"))
screenGui.Name = "WhitelistUI"

-- Boîte de texte pour entrer la clé
local textBox = Instance.new("TextBox", screenGui)
textBox.Size = UDim2.new(0, 200, 0, 50)
textBox.Position = UDim2.new(0.5, -100, 0.4, 0)
textBox.PlaceholderText = "Enter your key"
textBox.TextScaled = true

-- Bouton GetKey
local getKeyButton = Instance.new("TextButton", screenGui)
getKeyButton.Size = UDim2.new(0, 200, 0, 50)
getKeyButton.Position = UDim2.new(0.5, -100, 0.5, 0)
getKeyButton.Text = "GET KEY"
getKeyButton.TextScaled = true

-- Bouton CheckKey (caché au début)
local checkKeyButton = Instance.new("TextButton", screenGui)
checkKeyButton.Size = UDim2.new(0, 200, 0, 50)
checkKeyButton.Position = UDim2.new(0.5, -100, 0.6, 0)
checkKeyButton.Text = "CHECK KEY"
checkKeyButton.TextScaled = true
checkKeyButton.Visible = false

-- Ton lien lootlabs
lootlabsLink = "https://lootlabs.net/key-system/TON-ID/"..HttpService:GenerateGUID(false)

-- Quand on clique sur GET KEY
getKeyButton.MouseButton1Click:Connect(function()
	setclipboard(lootlabsLink)
	checkKeyButton.Visible = true
	textBox.Text = ""
end)

-- Quand on clique sur CHECK KEY
checkKeyButton.MouseButton1Click:Connect(function()
	local key = textBox.Text
	if key == "" then
		textBox.Text = "Please enter a key"
		return
	end

	local success, result = pcall(function()
		-- Mets ici le vrai lien vers tes clés hébergées
		return game:HttpGet("https://yourserver.com/keys/"..key..".txt")
	end)

	if success and result then
		loadstring(result)()
	else
		textBox.Text = "Invalid Key"
	end
end)
